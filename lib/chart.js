"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"default",{enumerable:true,get:()=>_default});const _react=require("react");const _auto=_interopRequireDefault(require("chart.js/auto"));const _json5=_interopRequireDefault(require("json5"));const _reactResizeDetector=require("react-resize-detector");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ChartError(props){return React.createElement("div",{className:"ui error message"},React.createElement("div",{className:"header"},"Failed to render chart"),React.createElement("p",null,props.error.name,": ",props.error.message))}function ChartComponent(props){const code=props.children[0];const[chart,setChart]=(0,_react.useState)(null);const[imageUrl,setImageUrl]=(0,_react.useState)("");const[error,setError]=(0,_react.useState)(null);const canvasRef=(0,_react.useRef)(null);const destroyChart=()=>{if(chart)chart.destroy()};const renderChart=()=>{try{const ctx=canvasRef.current;const config={..._json5.default.parse(code),options:{animation:false}};const newChart=new _auto.default(ctx,config);setChart(newChart);setImageUrl(newChart.toBase64Image());setError(null)}catch(e){setChart(null);setImageUrl(null);setError(e)}};(0,_react.useEffect)(()=>{destroyChart();renderChart()},[code,props.width]);return React.createElement("div",{className:"chartjs"},error?React.createElement(ChartError,{error:error}):React.createElement("img",{src:imageUrl,style:{backgroundColor:"transparent"}}),React.createElement("canvas",{key:code,ref:canvasRef,style:{display:"none"}}))}const _default=(0,_reactResizeDetector.withResizeDetector)(ChartComponent);